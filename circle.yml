machine:
  python:
    version: 2.7.10
  environment:
    LLVMDIR: /opt/llvm

dependencies:
  pre:
    - pip install --upgrade pip
    - pip install tox tox-pyenv virtualenv
    - sudo apt-get update; sudo apt-get install scons wget
    - wget --no-check-certificate -O ducky-llvm-latest.tar.gz https://ducky.happz.cz/llvm/ducky-llvm-latest.tar.gz
    - tar xzf ducky-llvm-latest.tar.gz -C /
    - pyenv local 2.7.10 3.3.3 3.4.3 3.5.0 pypy-2.5.0

test:
  override:
    - git submodule init
    - git submodule update
    - /usr/bin/python /usr/bin/scons -sQc --clean-testsets
    - tox -e py27
    - tox -e py33
    - tox -e py34
    - tox -e py35
    - tox -e pypy
